{"version":3,"file":"wpfeatureloop.es.js","sources":["../src/wpfeatureloop.js"],"sourcesContent":["/**\n * WPFeatureLoop SDK\n * A feature voting widget for WordPress plugins\n *\n * @version 1.0.0\n * @license MIT\n */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.WPFeatureLoop = factory());\n})(this, function() {\n  'use strict';\n\n  /**\n   * SVG Icons\n   */\n  const icons = {\n    plus: '<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M12 5v14M5 12h14\"/></svg>',\n    arrowUp: '<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"m18 15-6-6-6 6\"/></svg>',\n    arrowDown: '<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"m6 9 6 6 6-6\"/></svg>',\n    comment: '<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"/></svg>',\n    close: '<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M18 6 6 18M6 6l12 12\"/></svg>',\n    send: '<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"m22 2-7 20-4-9-9-4 20-7z\"/><path d=\"m22 2-11 11\"/></svg>',\n    empty: '<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6\"/></svg>',\n    error: '<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"/><path d=\"m15 9-6 6M9 9l6 6\"/></svg>'\n  };\n\n  /**\n   * Translations\n   */\n  const translations = {\n    'en': {\n      title: 'Feature Roadmap',\n      subtitle: 'Vote for features you want to see next',\n      suggestFeature: 'Suggest Feature',\n      suggestTitle: 'Suggest a Feature',\n      titleLabel: 'Title',\n      titlePlaceholder: 'Brief description of your feature idea',\n      descriptionLabel: 'Description',\n      descriptionPlaceholder: 'Explain the feature and why it would be valuable...',\n      categoryLabel: 'Category',\n      categoryPlaceholder: 'e.g., UI/UX, Performance, Integration',\n      cancel: 'Cancel',\n      submit: 'Submit Feature',\n      comments: 'comments',\n      comment: 'comment',\n      addComment: 'Add a comment...',\n      noComments: 'No comments yet. Be the first to share your thoughts!',\n      emptyTitle: 'No features yet',\n      emptyText: 'Be the first to suggest a feature!',\n      errorTitle: 'Failed to load features',\n      errorText: 'Please try again later.',\n      retry: 'Retry',\n      fillAllFields: 'Please fill in all fields',\n      featureSubmitted: 'Feature submitted successfully!',\n      commentAdded: 'Comment added!',\n      voteSaved: 'Vote saved!',\n      statusOpen: 'Open',\n      statusPlanned: 'Planned',\n      statusProgress: 'In Progress',\n      statusCompleted: 'Completed',\n      upvote: 'Upvote',\n      downvote: 'Downvote'\n    },\n    'pt-BR': {\n      title: 'Roadmap de Features',\n      subtitle: 'Vote nas funcionalidades que deseja ver',\n      suggestFeature: 'Sugerir Feature',\n      suggestTitle: 'Sugerir uma Feature',\n      titleLabel: 'Título',\n      titlePlaceholder: 'Breve descrição da sua ideia',\n      descriptionLabel: 'Descrição',\n      descriptionPlaceholder: 'Explique a feature e por que seria valiosa...',\n      categoryLabel: 'Categoria',\n      categoryPlaceholder: 'Ex: UI/UX, Performance, Integração',\n      cancel: 'Cancelar',\n      submit: 'Enviar Feature',\n      comments: 'comentários',\n      comment: 'comentário',\n      addComment: 'Adicionar um comentário...',\n      noComments: 'Nenhum comentário ainda. Seja o primeiro!',\n      emptyTitle: 'Nenhuma feature ainda',\n      emptyText: 'Seja o primeiro a sugerir uma feature!',\n      errorTitle: 'Erro ao carregar features',\n      errorText: 'Por favor, tente novamente mais tarde.',\n      retry: 'Tentar novamente',\n      fillAllFields: 'Por favor, preencha todos os campos',\n      featureSubmitted: 'Feature enviada com sucesso!',\n      commentAdded: 'Comentário adicionado!',\n      voteSaved: 'Voto salvo!',\n      statusOpen: 'Aberto',\n      statusPlanned: 'Planejado',\n      statusProgress: 'Em Progresso',\n      statusCompleted: 'Concluído',\n      upvote: 'Votar a favor',\n      downvote: 'Votar contra'\n    }\n  };\n\n  /**\n   * API Service\n   * Handles all API communication (fake data for now)\n   */\n  class ApiService {\n    constructor(config) {\n      this.publicKey = config.publicKey;\n      this.projectId = config.projectId;\n      this.user = config.user;\n      this.signature = config.signature;\n      this.baseUrl = config.apiUrl || 'https://api.wpfeatureloop.io/v1';\n    }\n\n    /**\n     * Simulate API delay\n     */\n    async _simulateDelay(ms = 800) {\n      return new Promise(resolve => setTimeout(resolve, ms));\n    }\n\n    /**\n     * Get headers for API requests\n     */\n    _getHeaders() {\n      return {\n        'Content-Type': 'application/json',\n        'X-Public-Key': this.publicKey,\n        'X-Project-Id': this.projectId,\n        'X-User-Id': this.user?.id?.toString() || '',\n        'X-Signature': this.signature || ''\n      };\n    }\n\n    /**\n     * Fetch features list\n     * @returns {Promise<Array>}\n     */\n    async getFeatures() {\n      await this._simulateDelay();\n\n      // TODO: Replace with real API call\n      // const response = await fetch(`${this.baseUrl}/features`, {\n      //   method: 'GET',\n      //   headers: this._getHeaders()\n      // });\n      // return response.json();\n\n      // Fake data for now\n      return [\n        {\n          id: 1,\n          title: 'Dark Mode Support',\n          description: 'Add a dark mode theme option that follows system preferences or can be toggled manually. Essential for users who work at night or prefer darker interfaces.',\n          votes: 47,\n          userVote: null,\n          status: 'planned',\n          commentsCount: 2,\n          tags: ['UI/UX'],\n          createdAt: '2024-01-15T10:00:00Z'\n        },\n        {\n          id: 2,\n          title: 'Export Data to CSV',\n          description: 'Allow users to export all their data in CSV format for backup or migration purposes. Include options to select specific date ranges and data types.',\n          votes: 32,\n          userVote: null,\n          status: 'progress',\n          commentsCount: 1,\n          tags: ['Data'],\n          createdAt: '2024-01-10T14:30:00Z'\n        },\n        {\n          id: 3,\n          title: 'API Webhooks',\n          description: 'Implement webhooks to notify external services when certain events occur, like new submissions or status changes.',\n          votes: 28,\n          userVote: 'up',\n          status: 'open',\n          commentsCount: 5,\n          tags: ['Integration'],\n          createdAt: '2024-01-08T09:15:00Z'\n        },\n        {\n          id: 4,\n          title: 'Multi-language Support',\n          description: 'Add support for multiple languages to make the plugin accessible to users worldwide.',\n          votes: 15,\n          userVote: null,\n          status: 'open',\n          commentsCount: 0,\n          tags: ['i18n'],\n          createdAt: '2024-01-05T16:45:00Z'\n        }\n      ];\n    }\n\n    /**\n     * Vote on a feature\n     * @param {number} featureId\n     * @param {string} voteType - 'up', 'down', or 'none'\n     * @returns {Promise<Object>}\n     */\n    async vote(featureId, voteType) {\n      await this._simulateDelay(300);\n\n      // TODO: Replace with real API call\n      // const response = await fetch(`${this.baseUrl}/features/${featureId}/vote`, {\n      //   method: 'POST',\n      //   headers: this._getHeaders(),\n      //   body: JSON.stringify({ vote: voteType })\n      // });\n      // return response.json();\n\n      return { success: true, featureId, voteType };\n    }\n\n    /**\n     * Get comments for a feature\n     * @param {number} featureId\n     * @returns {Promise<Array>}\n     */\n    async getComments(featureId) {\n      await this._simulateDelay(500);\n\n      // TODO: Replace with real API call\n      // const response = await fetch(`${this.baseUrl}/features/${featureId}/comments`, {\n      //   method: 'GET',\n      //   headers: this._getHeaders()\n      // });\n      // return response.json();\n\n      // Fake data based on feature\n      const commentsMap = {\n        1: [\n          { id: 1, author: 'Sarah M.', initials: 'SM', text: 'This would be amazing! My eyes would thank you.', time: '2 days ago' },\n          { id: 2, author: 'Dev Team', initials: 'DT', text: \"We're planning this for the next major release!\", time: '1 day ago' }\n        ],\n        2: [\n          { id: 1, author: 'Mike R.', initials: 'MR', text: 'Need this for compliance reporting!', time: '5 days ago' }\n        ],\n        3: [\n          { id: 1, author: 'John D.', initials: 'JD', text: 'Would love to integrate with Zapier!', time: '1 week ago' },\n          { id: 2, author: 'Anna K.', initials: 'AK', text: 'Slack integration would be great too.', time: '6 days ago' },\n          { id: 3, author: 'Dev Team', initials: 'DT', text: 'Great suggestions! Adding to our roadmap.', time: '5 days ago' },\n          { id: 4, author: 'Peter S.', initials: 'PS', text: 'Any ETA on this?', time: '3 days ago' },\n          { id: 5, author: 'Dev Team', initials: 'DT', text: 'Targeting Q2 2024!', time: '2 days ago' }\n        ]\n      };\n\n      return commentsMap[featureId] || [];\n    }\n\n    /**\n     * Add a comment to a feature\n     * @param {number} featureId\n     * @param {string} text\n     * @returns {Promise<Object>}\n     */\n    async addComment(featureId, text) {\n      await this._simulateDelay(400);\n\n      // TODO: Replace with real API call\n      // const response = await fetch(`${this.baseUrl}/features/${featureId}/comments`, {\n      //   method: 'POST',\n      //   headers: this._getHeaders(),\n      //   body: JSON.stringify({ text })\n      // });\n      // return response.json();\n\n      const userName = this.user?.name || 'You';\n      const initials = userName.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2);\n\n      return {\n        id: Date.now(),\n        author: userName,\n        initials,\n        text,\n        time: 'Just now'\n      };\n    }\n\n    /**\n     * Create a new feature suggestion\n     * @param {Object} feature\n     * @returns {Promise<Object>}\n     */\n    async createFeature(feature) {\n      await this._simulateDelay(600);\n\n      // TODO: Replace with real API call\n      // const response = await fetch(`${this.baseUrl}/features`, {\n      //   method: 'POST',\n      //   headers: this._getHeaders(),\n      //   body: JSON.stringify(feature)\n      // });\n      // return response.json();\n\n      return {\n        id: Date.now(),\n        title: feature.title,\n        description: feature.description,\n        votes: 1,\n        userVote: 'up',\n        status: 'open',\n        commentsCount: 0,\n        tags: [feature.category || 'General'],\n        createdAt: new Date().toISOString()\n      };\n    }\n  }\n\n  /**\n   * WPFeatureLoop Main Class\n   */\n  class WPFeatureLoop {\n    /**\n     * @param {Object} config\n     * @param {string} config.container - CSS selector for the container element\n     * @param {string} config.publicKey - Public API key\n     * @param {string} config.projectId - Project ID\n     * @param {string} [config.locale='en'] - Locale for translations\n     * @param {Object} [config.user] - User data\n     * @param {number|string} config.user.id - User ID (required)\n     * @param {string} [config.user.email] - User email\n     * @param {string} [config.user.name] - User display name\n     * @param {string} [config.user.plan] - User plan (free, pro, etc)\n     * @param {Object} [config.user.meta] - Additional user metadata\n     * @param {string} [config.signature] - HMAC signature for user data\n     * @param {Array<string>} [config.allowedRoles] - Roles allowed to create features\n     * @param {string} [config.userRole] - Current user's role\n     * @param {string} [config.apiUrl] - Custom API URL\n     */\n    constructor(config) {\n      this.config = config;\n      this.container = null;\n      this.features = [];\n      this.isLoading = true;\n      this.hasError = false;\n      this.currentCommentFeatureId = null;\n      this.currentComments = [];\n\n      // Validate required config\n      if (!config.container) {\n        throw new Error('WPFeatureLoop: container is required');\n      }\n      if (!config.publicKey) {\n        throw new Error('WPFeatureLoop: publicKey is required');\n      }\n      if (!config.projectId) {\n        throw new Error('WPFeatureLoop: projectId is required');\n      }\n      if (!config.user?.id) {\n        throw new Error('WPFeatureLoop: user.id is required');\n      }\n\n      // Set defaults\n      this.locale = config.locale || 'en';\n      this.t = translations[this.locale] || translations['en'];\n      this.allowedRoles = config.allowedRoles || ['administrator'];\n      this.userRole = config.userRole || 'subscriber';\n\n      // Initialize API service\n      this.api = new ApiService(config);\n    }\n\n    /**\n     * Check if current user can create features\n     */\n    canCreateFeature() {\n      return this.allowedRoles.includes(this.userRole);\n    }\n\n    /**\n     * Initialize the widget\n     */\n    async init() {\n      this.container = document.querySelector(this.config.container);\n\n      if (!this.container) {\n        throw new Error(`WPFeatureLoop: Container \"${this.config.container}\" not found`);\n      }\n\n      this.container.classList.add('wfl-container');\n      this.renderSkeleton();\n\n      try {\n        this.features = await this.api.getFeatures();\n        this.isLoading = false;\n        this.render();\n      } catch (error) {\n        console.error('WPFeatureLoop: Failed to load features', error);\n        this.isLoading = false;\n        this.hasError = true;\n        this.renderError();\n      }\n    }\n\n    /**\n     * Render skeleton loading state\n     */\n    renderSkeleton() {\n      const skeletonCards = Array(3).fill(0).map(() => `\n        <div class=\"wfl-skeleton-card\">\n          <div class=\"wfl-skeleton-vote\">\n            <div class=\"wfl-skeleton wfl-skeleton-vote-btn\"></div>\n            <div class=\"wfl-skeleton wfl-skeleton-vote-count\"></div>\n            <div class=\"wfl-skeleton wfl-skeleton-vote-btn\"></div>\n          </div>\n          <div class=\"wfl-skeleton-content\">\n            <div class=\"wfl-skeleton wfl-skeleton-title\"></div>\n            <div class=\"wfl-skeleton wfl-skeleton-desc\"></div>\n            <div class=\"wfl-skeleton wfl-skeleton-desc-2\"></div>\n            <div class=\"wfl-skeleton-footer\">\n              <div class=\"wfl-skeleton wfl-skeleton-meta\"></div>\n              <div class=\"wfl-skeleton wfl-skeleton-tag\"></div>\n            </div>\n          </div>\n        </div>\n      `).join('');\n\n      this.container.innerHTML = `\n        <div class=\"wfl-header\">\n          <div class=\"wfl-header-content\">\n            <h1 class=\"wfl-title\">${this.t.title}</h1>\n            <p class=\"wfl-subtitle\">${this.t.subtitle}</p>\n          </div>\n          ${this.canCreateFeature() ? `\n            <button class=\"wfl-btn wfl-btn-primary wfl-ripple\" disabled>\n              ${icons.plus}\n              ${this.t.suggestFeature}\n            </button>\n          ` : ''}\n        </div>\n        <div class=\"wfl-list\">\n          ${skeletonCards}\n        </div>\n      `;\n    }\n\n    /**\n     * Render error state\n     */\n    renderError() {\n      this.container.innerHTML = `\n        <div class=\"wfl-header\">\n          <div class=\"wfl-header-content\">\n            <h1 class=\"wfl-title\">${this.t.title}</h1>\n            <p class=\"wfl-subtitle\">${this.t.subtitle}</p>\n          </div>\n        </div>\n        <div class=\"wfl-error\">\n          <div class=\"wfl-error-icon\">${icons.error}</div>\n          <h3 class=\"wfl-error-title\">${this.t.errorTitle}</h3>\n          <p class=\"wfl-error-text\">${this.t.errorText}</p>\n          <button class=\"wfl-btn wfl-btn-primary\" id=\"wfl-retry\">\n            ${this.t.retry}\n          </button>\n        </div>\n      `;\n\n      this.container.querySelector('#wfl-retry')?.addEventListener('click', () => {\n        this.hasError = false;\n        this.isLoading = true;\n        this.init();\n      });\n    }\n\n    /**\n     * Main render method\n     */\n    render() {\n      const featuresHtml = this.features.length > 0\n        ? this.features.map(f => this.renderCard(f)).join('')\n        : this.renderEmpty();\n\n      this.container.innerHTML = `\n        <div class=\"wfl-header\">\n          <div class=\"wfl-header-content\">\n            <h1 class=\"wfl-title\">${this.t.title}</h1>\n            <p class=\"wfl-subtitle\">${this.t.subtitle}</p>\n          </div>\n          ${this.canCreateFeature() ? `\n            <button class=\"wfl-btn wfl-btn-primary wfl-ripple\" id=\"wfl-add-feature\">\n              ${icons.plus}\n              ${this.t.suggestFeature}\n            </button>\n          ` : ''}\n        </div>\n        <div class=\"wfl-list\" id=\"wfl-list\">\n          ${featuresHtml}\n        </div>\n        ${this.renderModal()}\n        ${this.renderCommentModal()}\n        <div class=\"wfl-toast\" id=\"wfl-toast\"></div>\n      `;\n\n      this.attachEventListeners();\n    }\n\n    /**\n     * Render a feature card\n     */\n    renderCard(feature) {\n      const voteClass = feature.votes > 0 ? 'wfl-vote-positive' : (feature.votes < 0 ? 'wfl-vote-negative' : '');\n      const upVoted = feature.userVote === 'up';\n      const downVoted = feature.userVote === 'down';\n      const commentText = feature.commentsCount === 1 ? this.t.comment : this.t.comments;\n\n      return `\n        <div class=\"wfl-card\" data-id=\"${feature.id}\">\n          <div class=\"wfl-vote\">\n            <button class=\"wfl-vote-btn wfl-vote-up wfl-tooltip ${upVoted ? 'wfl-voted' : ''}\"\n                    data-id=\"${feature.id}\"\n                    data-action=\"up\"\n                    data-tooltip=\"${this.t.upvote}\">\n              ${icons.arrowUp}\n            </button>\n            <span class=\"wfl-vote-count ${voteClass}\" data-id=\"${feature.id}\">${feature.votes}</span>\n            <button class=\"wfl-vote-btn wfl-vote-down wfl-tooltip ${downVoted ? 'wfl-voted' : ''}\"\n                    data-id=\"${feature.id}\"\n                    data-action=\"down\"\n                    data-tooltip=\"${this.t.downvote}\">\n              ${icons.arrowDown}\n            </button>\n          </div>\n          <div class=\"wfl-content\">\n            <div class=\"wfl-content-header\">\n              <h3 class=\"wfl-feature-title\" data-id=\"${feature.id}\">${feature.title}</h3>\n              ${this.renderStatus(feature.status)}\n            </div>\n            <p class=\"wfl-description\">${feature.description}</p>\n            <div class=\"wfl-footer\">\n              <button class=\"wfl-meta wfl-comment-trigger\" data-id=\"${feature.id}\">\n                ${icons.comment}\n                <span>${feature.commentsCount} ${commentText}</span>\n              </button>\n              ${feature.tags.map(tag => `<span class=\"wfl-tag\">${tag}</span>`).join('')}\n            </div>\n          </div>\n        </div>\n      `;\n    }\n\n    /**\n     * Render status badge\n     */\n    renderStatus(status) {\n      const labels = {\n        open: this.t.statusOpen,\n        planned: this.t.statusPlanned,\n        progress: this.t.statusProgress,\n        completed: this.t.statusCompleted\n      };\n\n      return `\n        <span class=\"wfl-status wfl-status-${status}\">\n          <span class=\"wfl-status-dot\"></span>\n          ${labels[status] || status}\n        </span>\n      `;\n    }\n\n    /**\n     * Render empty state\n     */\n    renderEmpty() {\n      return `\n        <div class=\"wfl-empty\">\n          <div class=\"wfl-empty-icon\">${icons.empty}</div>\n          <h3 class=\"wfl-empty-title\">${this.t.emptyTitle}</h3>\n          <p class=\"wfl-empty-text\">${this.t.emptyText}</p>\n        </div>\n      `;\n    }\n\n    /**\n     * Render feature creation modal\n     */\n    renderModal() {\n      if (!this.canCreateFeature()) return '';\n\n      return `\n        <div class=\"wfl-modal-overlay\" id=\"wfl-modal\">\n          <div class=\"wfl-modal\">\n            <div class=\"wfl-modal-header\">\n              <h2 class=\"wfl-modal-title\">${this.t.suggestTitle}</h2>\n              <button class=\"wfl-modal-close\" id=\"wfl-modal-close\">\n                ${icons.close}\n              </button>\n            </div>\n            <div class=\"wfl-modal-body\">\n              <div class=\"wfl-form-group\">\n                <label class=\"wfl-label\" for=\"wfl-feature-title\">${this.t.titleLabel}</label>\n                <input type=\"text\" class=\"wfl-input\" id=\"wfl-feature-title\" placeholder=\"${this.t.titlePlaceholder}\">\n              </div>\n              <div class=\"wfl-form-group\">\n                <label class=\"wfl-label\" for=\"wfl-feature-desc\">${this.t.descriptionLabel}</label>\n                <textarea class=\"wfl-textarea\" id=\"wfl-feature-desc\" placeholder=\"${this.t.descriptionPlaceholder}\"></textarea>\n              </div>\n              <div class=\"wfl-form-group\">\n                <label class=\"wfl-label\" for=\"wfl-feature-tag\">${this.t.categoryLabel}</label>\n                <input type=\"text\" class=\"wfl-input\" id=\"wfl-feature-tag\" placeholder=\"${this.t.categoryPlaceholder}\">\n              </div>\n            </div>\n            <div class=\"wfl-modal-footer\">\n              <button class=\"wfl-btn wfl-btn-secondary\" id=\"wfl-modal-cancel\">${this.t.cancel}</button>\n              <button class=\"wfl-btn wfl-btn-primary wfl-ripple\" id=\"wfl-modal-submit\">${this.t.submit}</button>\n            </div>\n          </div>\n        </div>\n      `;\n    }\n\n    /**\n     * Render comments modal\n     */\n    renderCommentModal() {\n      return `\n        <div class=\"wfl-modal-overlay\" id=\"wfl-comment-modal\">\n          <div class=\"wfl-modal\">\n            <div class=\"wfl-modal-header\">\n              <h2 class=\"wfl-modal-title\" id=\"wfl-comment-title\">${this.t.comments}</h2>\n              <button class=\"wfl-modal-close\" id=\"wfl-comment-modal-close\">\n                ${icons.close}\n              </button>\n            </div>\n            <div class=\"wfl-modal-body\">\n              <div class=\"wfl-comments-list\" id=\"wfl-comments-list\"></div>\n              <div class=\"wfl-comment-input-wrapper\">\n                <input type=\"text\" class=\"wfl-comment-input\" id=\"wfl-comment-input\" placeholder=\"${this.t.addComment}\">\n                <button class=\"wfl-comment-submit\" id=\"wfl-comment-submit\">\n                  ${icons.send}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      `;\n    }\n\n    /**\n     * Render comments list\n     */\n    renderCommentsList(comments) {\n      if (comments.length === 0) {\n        return `<p style=\"text-align: center; color: var(--wfl-gray-500); padding: 20px;\">${this.t.noComments}</p>`;\n      }\n\n      return comments.map(c => `\n        <div class=\"wfl-comment\">\n          <div class=\"wfl-comment-avatar\">${c.initials}</div>\n          <div class=\"wfl-comment-content\">\n            <div class=\"wfl-comment-header\">\n              <span class=\"wfl-comment-author\">${c.author}</span>\n              <span class=\"wfl-comment-time\">${c.time}</span>\n            </div>\n            <p class=\"wfl-comment-text\">${c.text}</p>\n          </div>\n        </div>\n      `).join('');\n    }\n\n    /**\n     * Attach event listeners\n     */\n    attachEventListeners() {\n      // Add feature button\n      const addBtn = this.container.querySelector('#wfl-add-feature');\n      if (addBtn) {\n        addBtn.addEventListener('click', () => this.openModal());\n      }\n\n      // Modal events\n      const modal = this.container.querySelector('#wfl-modal');\n      if (modal) {\n        const modalClose = this.container.querySelector('#wfl-modal-close');\n        const modalCancel = this.container.querySelector('#wfl-modal-cancel');\n        const modalSubmit = this.container.querySelector('#wfl-modal-submit');\n\n        modalClose?.addEventListener('click', () => this.closeModal());\n        modalCancel?.addEventListener('click', () => this.closeModal());\n        modal.addEventListener('click', (e) => {\n          if (e.target === modal) this.closeModal();\n        });\n        modalSubmit?.addEventListener('click', () => this.handleSubmitFeature());\n      }\n\n      // Comment modal events\n      const commentModal = this.container.querySelector('#wfl-comment-modal');\n      if (commentModal) {\n        const commentClose = this.container.querySelector('#wfl-comment-modal-close');\n\n        commentClose?.addEventListener('click', () => this.closeCommentModal());\n        commentModal.addEventListener('click', (e) => {\n          if (e.target === commentModal) this.closeCommentModal();\n        });\n      }\n\n      // Card events\n      this.features.forEach(f => this.attachCardListeners(f.id));\n    }\n\n    /**\n     * Attach listeners to a specific card\n     */\n    attachCardListeners(featureId) {\n      const card = this.container.querySelector(`.wfl-card[data-id=\"${featureId}\"]`);\n      if (!card) return;\n\n      // Vote buttons\n      card.querySelectorAll('.wfl-vote-btn').forEach(btn => {\n        btn.addEventListener('click', (e) => {\n          e.stopPropagation();\n          this.handleVote(btn);\n        });\n      });\n\n      // Comment trigger\n      const commentTrigger = card.querySelector('.wfl-comment-trigger');\n      if (commentTrigger) {\n        commentTrigger.addEventListener('click', () => {\n          this.openCommentModal(featureId);\n        });\n      }\n    }\n\n    /**\n     * Open feature creation modal\n     */\n    openModal() {\n      const modal = this.container.querySelector('#wfl-modal');\n      if (modal) {\n        modal.classList.add('wfl-active');\n      }\n    }\n\n    /**\n     * Close feature creation modal\n     */\n    closeModal() {\n      const modal = this.container.querySelector('#wfl-modal');\n      if (modal) {\n        modal.classList.remove('wfl-active');\n        this.container.querySelector('#wfl-feature-title').value = '';\n        this.container.querySelector('#wfl-feature-desc').value = '';\n        this.container.querySelector('#wfl-feature-tag').value = '';\n      }\n    }\n\n    /**\n     * Handle feature submission\n     */\n    async handleSubmitFeature() {\n      const title = this.container.querySelector('#wfl-feature-title').value.trim();\n      const description = this.container.querySelector('#wfl-feature-desc').value.trim();\n      const category = this.container.querySelector('#wfl-feature-tag').value.trim() || 'General';\n\n      if (!title || !description) {\n        this.showToast(this.t.fillAllFields, 'error');\n        return;\n      }\n\n      const submitBtn = this.container.querySelector('#wfl-modal-submit');\n      submitBtn.disabled = true;\n\n      try {\n        const newFeature = await this.api.createFeature({ title, description, category });\n        this.features.unshift(newFeature);\n\n        const list = this.container.querySelector('#wfl-list');\n        list.insertAdjacentHTML('afterbegin', this.renderCard(newFeature));\n        this.attachCardListeners(newFeature.id);\n\n        this.closeModal();\n        this.showToast(this.t.featureSubmitted, 'success');\n      } catch (error) {\n        console.error('WPFeatureLoop: Failed to create feature', error);\n        this.showToast(this.t.errorText, 'error');\n      } finally {\n        submitBtn.disabled = false;\n      }\n    }\n\n    /**\n     * Open comments modal\n     */\n    async openCommentModal(featureId) {\n      const feature = this.features.find(f => f.id === featureId);\n      if (!feature) return;\n\n      this.currentCommentFeatureId = featureId;\n      const commentModal = this.container.querySelector('#wfl-comment-modal');\n      const commentsList = this.container.querySelector('#wfl-comments-list');\n      const commentTitle = this.container.querySelector('#wfl-comment-title');\n      const commentInput = this.container.querySelector('#wfl-comment-input');\n\n      // Clear input and show modal\n      commentInput.value = '';\n      commentTitle.textContent = feature.title;\n      commentsList.innerHTML = '<div class=\"wfl-skeleton\" style=\"height: 60px; margin-bottom: 12px;\"></div>'.repeat(2);\n      commentModal.classList.add('wfl-active');\n\n      try {\n        this.currentComments = await this.api.getComments(featureId);\n        commentsList.innerHTML = this.renderCommentsList(this.currentComments);\n\n        // Create submit handler that reads input value at call time\n        const self = this;\n        const handleSubmit = async () => {\n          // Get fresh reference to input element\n          const input = self.container.querySelector('#wfl-comment-input');\n          const submitBtn = self.container.querySelector('#wfl-comment-submit');\n          const text = input.value.trim();\n\n          if (!text) return;\n\n          submitBtn.disabled = true;\n\n          try {\n            const newComment = await self.api.addComment(featureId, text);\n            self.currentComments.push(newComment);\n            commentsList.innerHTML = self.renderCommentsList(self.currentComments);\n\n            // Update comment count on card\n            feature.commentsCount = self.currentComments.length;\n            const card = self.container.querySelector(`.wfl-card[data-id=\"${featureId}\"]`);\n            const commentTrigger = card?.querySelector('.wfl-comment-trigger span');\n            if (commentTrigger) {\n              const commentText = feature.commentsCount === 1 ? self.t.comment : self.t.comments;\n              commentTrigger.textContent = `${feature.commentsCount} ${commentText}`;\n            }\n\n            input.value = '';\n            self.showToast(self.t.commentAdded, 'success');\n          } catch (error) {\n            console.error('WPFeatureLoop: Failed to add comment', error);\n            self.showToast(self.t.errorText, 'error');\n          } finally {\n            submitBtn.disabled = false;\n          }\n        };\n\n        // Attach listeners (replace elements to remove old listeners)\n        const oldSubmit = this.container.querySelector('#wfl-comment-submit');\n        const oldInput = this.container.querySelector('#wfl-comment-input');\n\n        const newSubmit = oldSubmit.cloneNode(true);\n        oldSubmit.parentNode.replaceChild(newSubmit, oldSubmit);\n        newSubmit.addEventListener('click', handleSubmit);\n\n        const newInput = oldInput.cloneNode(true);\n        oldInput.parentNode.replaceChild(newInput, oldInput);\n        newInput.addEventListener('keypress', (e) => {\n          if (e.key === 'Enter') handleSubmit();\n        });\n\n      } catch (error) {\n        console.error('WPFeatureLoop: Failed to load comments', error);\n        commentsList.innerHTML = `<p style=\"text-align: center; color: var(--wfl-danger);\">${this.t.errorText}</p>`;\n      }\n    }\n\n    /**\n     * Close comments modal\n     */\n    closeCommentModal() {\n      const commentModal = this.container.querySelector('#wfl-comment-modal');\n      if (commentModal) {\n        commentModal.classList.remove('wfl-active');\n\n        // Clear input\n        const commentInput = this.container.querySelector('#wfl-comment-input');\n        if (commentInput) {\n          commentInput.value = '';\n        }\n\n        this.currentCommentFeatureId = null;\n        this.currentComments = [];\n      }\n    }\n\n    /**\n     * Handle vote\n     */\n    async handleVote(btn) {\n      const id = parseInt(btn.dataset.id);\n      const action = btn.dataset.action;\n      const feature = this.features.find(f => f.id === id);\n\n      if (!feature) return;\n\n      const card = this.container.querySelector(`.wfl-card[data-id=\"${id}\"]`);\n      const voteCount = card.querySelector('.wfl-vote-count');\n      const upBtn = card.querySelector('.wfl-vote-up');\n      const downBtn = card.querySelector('.wfl-vote-down');\n\n      // Disable buttons during request\n      upBtn.disabled = true;\n      downBtn.disabled = true;\n\n      // Calculate new vote state\n      let newVoteType = 'none';\n      let voteDelta = 0;\n\n      if (action === 'up') {\n        if (feature.userVote === 'up') {\n          voteDelta = -1;\n          newVoteType = 'none';\n        } else if (feature.userVote === 'down') {\n          voteDelta = 2;\n          newVoteType = 'up';\n        } else {\n          voteDelta = 1;\n          newVoteType = 'up';\n        }\n      } else {\n        if (feature.userVote === 'down') {\n          voteDelta = 1;\n          newVoteType = 'none';\n        } else if (feature.userVote === 'up') {\n          voteDelta = -2;\n          newVoteType = 'down';\n        } else {\n          voteDelta = -1;\n          newVoteType = 'down';\n        }\n      }\n\n      // Optimistic update\n      feature.votes += voteDelta;\n      feature.userVote = newVoteType === 'none' ? null : newVoteType;\n\n      // Update UI\n      upBtn.classList.toggle('wfl-voted', feature.userVote === 'up');\n      downBtn.classList.toggle('wfl-voted', feature.userVote === 'down');\n      voteCount.textContent = feature.votes;\n      voteCount.classList.remove('wfl-vote-positive', 'wfl-vote-negative');\n      if (feature.votes > 0) {\n        voteCount.classList.add('wfl-vote-positive');\n      } else if (feature.votes < 0) {\n        voteCount.classList.add('wfl-vote-negative');\n      }\n\n      // Animation\n      voteCount.classList.add('wfl-animating');\n      setTimeout(() => voteCount.classList.remove('wfl-animating'), 300);\n\n      // Confetti on upvote\n      if (action === 'up' && newVoteType === 'up') {\n        this.createConfetti(upBtn);\n      }\n\n      try {\n        await this.api.vote(id, newVoteType);\n      } catch (error) {\n        console.error('WPFeatureLoop: Failed to save vote', error);\n        // Revert on error\n        feature.votes -= voteDelta;\n        feature.userVote = action === 'up'\n          ? (voteDelta === -1 ? 'up' : (voteDelta === 2 ? 'down' : null))\n          : (voteDelta === 1 ? 'down' : (voteDelta === -2 ? 'up' : null));\n\n        upBtn.classList.toggle('wfl-voted', feature.userVote === 'up');\n        downBtn.classList.toggle('wfl-voted', feature.userVote === 'down');\n        voteCount.textContent = feature.votes;\n\n        this.showToast(this.t.errorText, 'error');\n      } finally {\n        upBtn.disabled = false;\n        downBtn.disabled = false;\n      }\n    }\n\n    /**\n     * Create confetti animation\n     */\n    createConfetti(element) {\n      const colors = ['#6366f1', '#8b5cf6', '#ec4899', '#10b981', '#f59e0b'];\n      const rect = element.getBoundingClientRect();\n\n      for (let i = 0; i < 6; i++) {\n        const confetti = document.createElement('div');\n        confetti.className = 'wfl-confetti';\n        confetti.style.left = `${rect.left + rect.width / 2 + (Math.random() - 0.5) * 30}px`;\n        confetti.style.top = `${rect.top + rect.height / 2}px`;\n        confetti.style.background = colors[Math.floor(Math.random() * colors.length)];\n        confetti.style.position = 'fixed';\n        document.body.appendChild(confetti);\n\n        setTimeout(() => confetti.remove(), 600);\n      }\n    }\n\n    /**\n     * Show toast notification\n     */\n    showToast(message, type = 'default') {\n      const toast = this.container.querySelector('#wfl-toast');\n      if (!toast) return;\n\n      toast.textContent = message;\n      toast.className = 'wfl-toast wfl-active';\n\n      if (type === 'success') {\n        toast.classList.add('wfl-toast-success');\n      } else if (type === 'error') {\n        toast.classList.add('wfl-toast-error');\n      }\n\n      setTimeout(() => {\n        toast.classList.remove('wfl-active');\n      }, 3000);\n    }\n\n    /**\n     * Get all features\n     */\n    getFeatures() {\n      return [...this.features];\n    }\n\n    /**\n     * Refresh features from API\n     */\n    async refresh() {\n      this.isLoading = true;\n      this.renderSkeleton();\n\n      try {\n        this.features = await this.api.getFeatures();\n        this.isLoading = false;\n        this.hasError = false;\n        this.render();\n      } catch (error) {\n        console.error('WPFeatureLoop: Failed to refresh features', error);\n        this.isLoading = false;\n        this.hasError = true;\n        this.renderError();\n      }\n    }\n\n    /**\n     * Destroy the widget\n     */\n    destroy() {\n      if (this.container) {\n        this.container.innerHTML = '';\n        this.container.classList.remove('wfl-container');\n      }\n    }\n  }\n\n  /**\n   * Static init method for convenience\n   */\n  WPFeatureLoop.init = function(config) {\n    const instance = new WPFeatureLoop(config);\n    instance.init();\n    return instance;\n  };\n\n  /**\n   * Version\n   */\n  WPFeatureLoop.version = '1.0.0';\n\n  return WPFeatureLoop;\n});\n"],"names":["require_wpfeatureloop_es","__commonJSMin","exports","module","global","factory","this","icons","translations","ApiService","config","ms","resolve","_a","_b","featureId","voteType","text","userName","initials","n","feature","WPFeatureLoop","error","skeletonCards","featuresHtml","f","voteClass","upVoted","downVoted","commentText","tag","status","labels","comments","c","addBtn","modal","modalClose","modalCancel","modalSubmit","e","commentModal","commentClose","card","btn","commentTrigger","title","description","category","submitBtn","newFeature","commentsList","commentTitle","commentInput","self","handleSubmit","input","newComment","oldSubmit","oldInput","newSubmit","newInput","id","action","voteCount","upBtn","downBtn","newVoteType","voteDelta","element","colors","rect","i","confetti","message","type","toast","instance"],"mappings":"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"}